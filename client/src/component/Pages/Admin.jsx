import avatar from "client/src/assets/images/Glody.png";
import React, { useState, useEffect } from "react";
import UserTable from "client/src/component/general components/TableAdmin.jsx";
import UsersCard, {
  ExpositionCard,
  OeuvreCard,
} from "../general components/AdminCards";
import MenuDeroulant, {
  Deconnexion,
  Evenements,
  Utilisateurs,
  VisiteSite,
} from "../general components/MenuAdmin";
import Message from "../general components/ChatModel";
import MessageAdmin from "../general components/MenuAdmin";
import axios from 'axios';

function Admin() {

  const [utilisateurs, setUtilisateurs]=useState([]);

  const deleteUser = (userToDelete) => {
    setUsers(utilisateurs.filter((user) => user !== userToDelete));
  };

  const sendEmail = (user) => {
    console.log(`E-mail envoyé à ${user.email}`);
  };

  useEffect (()=>{
    const fectchUtilisateurs=async ()=>{
      try {
        const response = axios.get("http://localhost:8000/user")
        .then(response=>{
          setUtilisateurs(response.data)
        })

        // setUtilisateurs(response);
        
        
      } catch(error){
        console.error("Erreur lors de la récupération des utilisateurs:", error);
      }
    };
    fectchUtilisateurs();
  },[] )


  return (
    <div className="">
      <div className="flex justify-between bg-green-500 items-center">
        <div className="bg-green-700 flex items-center justify-center py-4 w-[20%]">
          <svg
            width="50"
            height="60"
            viewBox="0 0 448 512"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M166.837 8.00991C156.967 7.83691 147.337 9.9119 137.879 15.6599L137.888 15.6339C133.225 18.4709 128.318 22.5809 123.665 23.5749C108.44 26.8369 95.6002 35.5119 81.1072 40.1199C74.2132 42.3069 70.8972 46.5269 71.1042 53.6739C68.2762 58.7969 63.8122 62.0039 58.6252 64.4539C54.0302 66.6159 49.6522 69.0859 48.2842 74.5389C48.2622 74.5569 48.2392 74.5729 48.2172 74.5919C42.8132 80.8899 37.1302 86.9699 31.6192 96.3849L200.587 40.9339C193.277 33.9849 185.687 28.1039 194.135 17.4409C186.558 17.9559 181.201 22.3509 174.818 21.3639C178.44 15.9739 186.191 17.1149 190.332 11.8199C182.335 9.63791 174.513 8.14391 166.837 8.00991ZM257.512 41.6559C250.392 42.0979 243.542 42.6599 237.633 47.7739C230.613 53.8099 222.723 55.5249 214.763 48.8119C208.755 43.7419 202.9 44.7019 196.087 47.9999C180.355 55.6349 164.218 62.4569 148.261 69.6039C111.245 86.2627 74.2378 102.939 37.2382 119.634C25.4102 123.502 24.8862 124.577 27.6062 136.359C29.5942 144.961 33.1812 154.016 23.0882 160.431C21.9821 160.932 21.0462 161.745 20.3949 162.769C19.7435 163.794 19.4052 164.987 19.4212 166.201C19.4112 166.207 19.4022 166.21 19.3922 166.214C16.7722 175.368 18.9692 184.267 20.6322 193.258C21.6892 198.95 24.3362 198.733 28.7092 196.655C38.6032 191.939 48.6422 187.52 58.6712 183.102C90.3812 169.162 122.097 155.232 153.818 141.312C154.707 141.348 155.597 141.267 156.465 141.07C155.435 141.614 154.483 142.26 153.963 143.472L121.434 162.537L72.4512 187.492C58.4182 189.914 46.2472 197.495 32.9462 201.796C24.7142 204.452 26.3502 207.318 31.9612 211.013C37.2112 217.338 44.9462 218.901 52.2012 221.359C52.2112 221.353 52.2212 221.349 52.2312 221.342C57.8532 223.978 63.4412 226.702 69.1262 229.21C74.4122 231.56 79.3262 232.372 82.5432 225.668C84.3512 221.864 87.6402 221.312 91.5792 223.12C97.7172 225.98 104.215 226.065 110.785 224.93L110.779 224.936C110.793 224.937 110.807 224.936 110.819 224.938L110.852 224.965L110.898 224.944C113.388 225.161 115.847 225.193 118.008 223.61C120.981 223.61 123.98 223.375 126.917 223.673C140.904 225.101 155.469 220.347 168.941 227.793C171.499 229.202 173.884 226.411 176.17 225.246C200.444 212.822 224.69 200.343 248.907 187.809C281.074 171.232 313.231 154.658 345.374 138.086C348.13 136.659 354.409 136.036 348.934 130.461V130.415C345.18 122.854 341.816 115.149 340.484 106.725C340.494 106.715 340.502 106.705 340.51 106.695C340.085 100.416 337.944 94.6609 335.233 89.0409C332.883 84.2249 330.237 82.8859 324.752 85.3259C312.057 90.9819 299.035 96.1429 286.024 100.796C273.012 105.45 260.931 112.759 246.944 114.656C246.93 114.654 246.916 114.654 246.902 114.651L246.909 114.647C246.782 112.505 248.715 112.749 249.881 112.099L318.9 73.6699C319.153 67.2269 316.84 61.4349 314.382 55.6879C314.378 55.6912 314.373 55.6936 314.367 55.6949L314.37 55.6879C311.063 47.3119 305.263 44.8619 296.878 48.2139C291.193 50.5692 285.135 51.8974 278.986 52.1369V52.1179L278.942 52.1339L274.162 51.7479C267.439 50.3109 263.211 44.7719 257.509 41.6549L257.512 41.6559ZM359.093 150.663C357.53 150.757 355.763 151.413 353.679 152.507C328.234 165.853 302.563 178.763 276.965 191.802C246.885 207.162 216.759 222.361 186.788 237.884C184.9 238.851 179.598 238.644 182.128 243.369C185.432 249.519 184.431 256.02 184.601 262.468C184.598 262.468 184.595 262.471 184.592 262.472V262.498C184.52 265.658 184.455 268.814 184.395 271.968C185.099 277.028 186.954 281.86 189.816 286.092L189.848 286.099L189.825 286.109L193.484 290.98L202.059 301.714C203.523 311.698 208.609 311.806 217.194 308.87C248.313 298.208 279.74 288.413 311.049 278.293L312.856 280.155C312.865 280.154 312.873 280.152 312.881 280.151L278.756 296.301C273.072 297.819 267.913 300.476 262.807 303.358C262.059 303.274 261.302 303.399 260.62 303.718C259.938 304.037 259.357 304.537 258.941 305.165C245.386 310.207 232.18 316.142 219.409 322.929C219.199 322.83 218.958 322.816 218.738 322.89C218.517 322.964 218.334 323.12 218.225 323.326C215.473 323.626 212.888 324.794 210.843 326.66C206.099 327.726 200.767 329.272 201.02 334.928C201.652 349.068 196.746 361.925 193.096 375.116L193.087 375.119C191.965 377.075 191.469 379.328 191.668 381.574C191.867 383.82 192.751 385.951 194.199 387.679C196.982 391.013 200.677 387.082 203.731 385.971C250.082 369.166 296.394 352.253 342.666 335.235C348.783 332.994 356.633 332 360.347 327.618C364.341 322.892 358.937 315.275 359.353 308.796C359.875 306.016 360.406 303.236 360.928 300.446C360.93 300.442 360.931 300.44 360.936 300.438C363.719 291.882 370.532 285.583 374.011 277.415L389.878 255.369C393.248 248.141 401.515 245.863 405.906 239.656L405.701 239.726L405.861 239.638C415.303 233.846 419.341 224.033 425.991 213.823L383.055 227.014C380.623 227.174 378.229 227.531 375.856 227.99C377.116 227.263 378.22 226.296 379.107 225.144C381.746 223.879 384.411 222.642 387.031 221.332C400.856 214.429 416.027 210.407 429.038 201.769C428.688 201.704 428.37 201.522 428.135 201.254C428.433 201.416 428.731 201.579 429.038 201.769C430.294 198.001 429.824 194.169 429.111 190.437L429.137 190.492C428.125 185.206 425.803 182.495 420.102 186.308C416.499 188.889 412.344 190.594 407.967 191.288C407.956 191.295 407.945 191.302 407.933 191.309C407.934 191.295 407.937 191.282 407.941 191.269C400.017 190.672 391.839 190.827 386.4 183.391H386.426C383.878 179.894 381.168 182.414 378.584 183.444C358.612 191.469 338.646 199.508 318.685 207.561C317.187 207.7 315.755 208.041 314.352 208.484C315.209 207.654 315.961 206.72 316.472 205.546C330.907 198.061 345.327 190.549 359.734 183.011C366.014 179.722 376.279 177.355 377.472 172.711C379.026 166.692 369.276 161.749 365.725 155.424C363.738 151.906 361.7 150.506 359.095 150.663H359.093ZM361.707 336.34C360.838 336.282 359.721 336.533 358.287 337.123C307.858 357.937 257.381 378.635 206.857 399.217C202.999 400.826 202.167 402.235 204.147 406.247C208.971 416.004 213.407 425.969 215.893 436.657C215.887 436.658 215.881 436.659 215.875 436.66H215.893V436.672C216.191 439.608 216.905 442.582 216.715 445.492C216.263 452.224 217.483 454.292 224.802 451.039C258.288 436.129 292.136 422.052 325.613 407.134C339.863 400.782 349.567 389.497 355.521 375.04C355.51 375.041 355.499 375.042 355.487 375.043C355.495 375.04 355.498 375.036 355.506 375.028C364.144 365.143 365.491 353.325 364.542 340.91C364.324 338.09 363.62 336.465 361.709 336.339L361.707 336.34ZM417.303 354.817C413.278 354.847 410.645 359.007 408.779 362.73C407.111 366.047 405.903 369.598 404.489 373.05L404.477 373.061C402.002 378.166 400.022 382.728 392.17 381.481C386.649 380.604 379.077 384.987 379.61 390.218C380.712 401.142 373.403 410.495 375.644 421.157C376.506 421.948 377.345 422.247 378.171 422.269C377.174 422.873 376.243 423.596 375.454 424.573C374.062 429.877 372.544 435.163 374.017 440.719C374.025 440.719 374.032 440.716 374.044 440.716C378.346 450.192 381.577 451.398 390.873 448.744C402.133 445.514 402.087 435.923 403.95 427.267C405.656 422.833 406.91 418.353 406.396 413.071L390.131 418.004L390.121 418.049C388.842 418.529 387.381 418.165 386.098 418.697C386.928 418.036 387.665 417.261 388.223 416.269C390.988 414.651 393.616 412.692 396.553 411.463C416.91 402.997 420.209 385.151 421.736 366.285C421.826 362.245 424.627 356.607 419.116 355.071C418.527 354.902 417.916 354.817 417.303 354.819V354.817ZM325.55 413.99C291.295 431.673 258.569 448.932 225.444 465.386C216.932 469.624 215.432 474.232 219.814 481.868C221.674 488.768 226.514 493.111 232.455 496.526V496.534L232.461 496.532C232.462 496.532 232.464 496.532 232.465 496.534L232.483 496.537C234.686 499.494 237.791 500.647 241.293 501.025C253.699 508.344 268.508 501.738 275.33 485.835C284.005 480.92 292.625 475.806 301.372 470.981C306.989 467.883 310.947 464.053 309.615 457.002C309.618 456.999 309.618 456.994 309.622 456.991C311.294 452.356 317.276 451.199 318.414 446.148C317.394 435.242 326.59 426.269 325.56 414.008L325.55 413.99Z"
              fill="white"
            />
          </svg>
          <p className="font-bold text-2xl text-gray-100  pl-4">AfriKulture.</p>
        </div>

        <div className="flex pr-10 w-[12%] justify-between items-center">
          <img
            className="w-16 h-16 border rounded-full border-4 border-green-500"
            src={avatar}
            alt=""
          />

          <svg
            width="23"
            height="19"
            viewBox="0 0 23 19"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M2.3 19C1.6675 19 1.12623 18.7676 0.6762 18.3029C0.226167 17.8382 0.000766667 17.2789 0 16.625V2.375C0 1.72187 0.2254 1.16296 0.6762 0.69825C1.127 0.233541 1.66827 0.000791667 2.3 0H20.7C21.3325 0 21.8741 0.23275 22.3249 0.69825C22.7757 1.16375 23.0008 1.72267 23 2.375V16.625C23 17.2781 22.775 17.8374 22.3249 18.3029C21.8749 18.7684 21.3333 19.0008 20.7 19H2.3ZM11.5 10.6875L20.7 4.75V2.375L11.5 8.3125L2.3 2.375V4.75L11.5 10.6875Z"
              fill="white"
            />
          </svg>

          <svg
            width="22"
            height="24"
            viewBox="0 0 22 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M22 21.6802L21.749 21.4334C21.0369 20.7265 20.4136 19.9157 19.896 19.0231C19.3306 17.7913 18.9918 16.446 18.8993 15.0663V11.0026C18.9042 8.83546 18.1987 6.74096 16.9154 5.11257C15.6322 3.48419 13.8594 2.43402 11.9302 2.15938V1.0982C11.9302 0.80694 11.8264 0.527608 11.6415 0.321656C11.4567 0.115703 11.206 0 10.9446 0C10.6832 0 10.4326 0.115703 10.2477 0.321656C10.0629 0.527608 9.95906 0.80694 9.95906 1.0982V2.17584C8.04717 2.47027 6.29582 3.52679 5.02938 5.1497C3.76295 6.77261 3.06725 8.85194 3.07114 11.0026V15.0663C2.97868 16.446 2.63984 17.7913 2.0745 19.0231C1.56575 19.9135 0.952493 20.7241 0.251007 21.4334L0 21.6802V24H22V21.6802Z"
              fill="white"
            />
          </svg>
        </div>
      </div>

      <div className="flex">
        <div className="w-[20%] bg-gray-900 h-screen">
          <div
            className=" bg-center bg-cover h-[18%]"
            style={{
              backgroundImage: "url('src/assets/images/background.jpg')",
            }}
          >
            <div className="bg-[#f0f8ff2d] h-full ">
              <div className="flex items-center pt-12 justify-between px-[4rem]">
                <img
                  className="w-16 h-16 rounded-full border-green-500"
                  src={avatar}
                  alt=""
                />

                <h2 className="font-bold text-xl text-gray-100">
                  Glody Mafo <br />
                  <span className="font-medium text-lg">Administrateur</span>
                </h2>
              </div>
            </div>
          </div>

          <div>
            <div className="flex items-center justify-between px-20 pt-10">
              <svg
                width="26"
                height="26"
                viewBox="0 0 26 26"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M23.4812 9.79063C22.9103 8.43911 22.0825 7.21121 21.0437 6.175C20.0075 5.13629 18.7796 4.3085 17.4281 3.7375C16.024 3.14336 14.5361 2.84375 13 2.84375C11.4639 2.84375 9.97598 3.14336 8.57188 3.7375C7.22036 4.3085 5.99246 5.13629 4.95625 6.175C3.91754 7.21121 3.08975 8.43911 2.51875 9.79063C1.92461 11.1947 1.625 12.6826 1.625 14.2188C1.625 17.5881 3.10527 20.7619 5.68496 22.9303L5.72813 22.9658C5.87539 23.0877 6.06074 23.1562 6.25117 23.1562H19.7514C19.9418 23.1562 20.1271 23.0877 20.2744 22.9658L20.3176 22.9303C22.8947 20.7619 24.375 17.5881 24.375 14.2188C24.375 12.6826 24.0729 11.1947 23.4812 9.79063ZM19.3324 21.2266H6.66758C5.68648 20.3419 4.90234 19.2609 4.36606 18.0536C3.82978 16.8463 3.55335 15.5398 3.55469 14.2188C3.55469 11.6949 4.5373 9.32344 6.32227 7.54102C8.10723 5.75605 10.4787 4.77344 13 4.77344C15.5238 4.77344 17.8953 5.75605 19.6777 7.54102C21.4627 9.32598 22.4453 11.6975 22.4453 14.2188C22.4453 16.9 21.3154 19.4365 19.3324 21.2266ZM15.8311 10.7021C15.7929 10.6643 15.7413 10.6431 15.6876 10.6431C15.6339 10.6431 15.5823 10.6643 15.5441 10.7021L13.3986 12.8477C12.9238 12.7207 12.3982 12.8426 12.025 13.2158C11.8928 13.3478 11.7879 13.5045 11.7164 13.677C11.6448 13.8496 11.608 14.0345 11.608 14.2213C11.608 14.4081 11.6448 14.593 11.7164 14.7656C11.7879 14.9381 11.8928 15.0948 12.025 15.2268C12.1569 15.359 12.3137 15.4638 12.4862 15.5354C12.6587 15.607 12.8437 15.6438 13.0305 15.6438C13.2173 15.6438 13.4022 15.607 13.5747 15.5354C13.7473 15.4638 13.904 15.359 14.0359 15.2268C14.2128 15.0505 14.3399 14.8306 14.4046 14.5894C14.4692 14.3482 14.4691 14.0942 14.4041 13.8531L16.5496 11.7076C16.6283 11.6289 16.6283 11.4994 16.5496 11.4207L15.8311 10.7021ZM12.4414 8.125H13.5586C13.6703 8.125 13.7617 8.03359 13.7617 7.92188V5.89062C13.7617 5.77891 13.6703 5.6875 13.5586 5.6875H12.4414C12.3297 5.6875 12.2383 5.77891 12.2383 5.89062V7.92188C12.2383 8.03359 12.3297 8.125 12.4414 8.125ZM19.043 13.6602V14.7773C19.043 14.8891 19.1344 14.9805 19.2461 14.9805H21.2773C21.3891 14.9805 21.4805 14.8891 21.4805 14.7773V13.6602C21.4805 13.5484 21.3891 13.457 21.2773 13.457H19.2461C19.1344 13.457 19.043 13.5484 19.043 13.6602ZM19.3654 8.65312L18.5758 7.86348C18.5376 7.82567 18.486 7.80447 18.4323 7.80447C18.3786 7.80447 18.327 7.82567 18.2889 7.86348L16.8518 9.30059C16.814 9.33876 16.7927 9.39032 16.7927 9.44404C16.7927 9.49777 16.814 9.54932 16.8518 9.5875L17.6414 10.3771C17.7201 10.4559 17.8496 10.4559 17.9283 10.3771L19.3654 8.94004C19.4441 8.86133 19.4441 8.73184 19.3654 8.65312ZM7.72129 7.86348C7.68311 7.82567 7.63156 7.80447 7.57783 7.80447C7.52411 7.80447 7.47255 7.82567 7.43437 7.86348L6.64473 8.65312C6.60692 8.6913 6.58572 8.74286 6.58572 8.79658C6.58572 8.85031 6.60692 8.90186 6.64473 8.94004L8.08184 10.3771C8.16055 10.4559 8.29004 10.4559 8.36875 10.3771L9.1584 9.5875C9.23711 9.50879 9.23711 9.3793 9.1584 9.30059L7.72129 7.86348ZM6.65234 13.457H4.62109C4.50938 13.457 4.41797 13.5484 4.41797 13.6602V14.7773C4.41797 14.8891 4.50938 14.9805 4.62109 14.9805H6.65234C6.76406 14.9805 6.85547 14.8891 6.85547 14.7773V13.6602C6.85547 13.5484 6.76406 13.457 6.65234 13.457Z"
                  fill="white"
                />
              </svg>

              <p className="text-white text-xl font-semibold">
                Tableau de bord
              </p>
            </div>

            <MessageAdmin />
            <Evenements />
            <Utilisateurs />
            <VisiteSite />
            <Deconnexion />
          </div>
        </div>

        <div className="w-[80%]">
          <h2 className="font-bold text-4xl p-12">Tableau de bord</h2>
          <div className="flex flex-wrap justify-between  items-center px-12 pb-14">
            <UsersCard number={utilisateurs.length}/>
            <OeuvreCard />
            <ExpositionCard />
          </div>

          <div className="bg-gray-200 p-8 w-[80%] my-8 mx-[10rem]">
            <div>
              <h1 className="text-2xl font-semibold pb-2">
                Liste des Utilisateurs
              </h1>
              <UserTable
                users={utilisateurs}
                onDeleteUser={deleteUser}
                onSendEmail={sendEmail}
              />
            </div>
          </div>
        </div>
      </div>

      <div className="bg-gray-100 p-4">
        <p className="text-gray-400 text-center">
          Copyright © 2024-Kadea-Code-Credit-GlodyDev
        </p>
      </div>
    </div>
  );
}

export default Admin;
